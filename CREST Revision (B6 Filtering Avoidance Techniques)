B6: Filtering Avoidance Techniques 
Learning Objectives:

The importance of egress and ingress filtering, including the risks associated with outbound connections.
---------------------------------------------------------------------------------------------------------------------------------------

Why do we need filtering? 
-DoS Defence Strategy
-Disabling unnecessary Services
-using Anti-Malware
-Enabling router Throttling
-Using a Rever Proxy
-Degrading Services
Absorbing the Attack
-Enabling Ingress and Egress Filtering

As a sec professional we want to make sure tht our firewall is filtering out the traffic that is bad for our network otherwise we are at risk of an attack. for example a DoS atttack, as part of our strategy in order to mitigate an attack on our
network we should be doing the above.

In terms of security Ingress adn Egress filtering is one of the first lines of defence in a netwrok providing capabilities to monitor and restrict malicious netwrok traffic.

What is Egress filtering?
UTM
Disrupt unwanted traffic
Interrupt Communication
Blcok certain services
Block traffic types
Block unauthrised activity

Egress filtering controls the traffic OUTBOUND from your netwrok through an egress enabled Firewall. Most UTM firewalls contin egress filtering or outboundfiltering which requires configuring in te first instance

configuring Egress filters - Allow All
MS RPC - TCP & UDP port 135
NetBios/IP -TCP & UDP port 137-135
SMB/IP TCP port 445
TFTP UDP Port 69
SysLog UDP port 514
SNMP UDP Port 161-162
IRC Tcp Ports 6660-6669

Configuring Egress Filters - Deny All
HTTP tcp port 80
HTTPS TCP Port 443
DNS UDP Port 53
SMTP TCP Port 25
NTP UDP port 123
FTP TCP Port 21

Ingress Filtering 
This montiors incoming traffic on your network through the use of inspection of in bound traffic from outside of the network .This allows the router to block any suspicious traffic that may be malicious or dosnt meet critira.
Ingress filters can be updated by the hardware vendors or security vendors using white lists as a version of access control list to actively know what traffic can be allowed in or not. This can be spoofed and malicious packets can still enter a network.
Ingress filters work at layer 2 (Data)

Common attacks detected by ingress filters:
Already in use IP's
Private IP addresses
IP addresses that are loopbacks
Multicast IP addresses
Service or management netwrok addresses

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Question and Answers
Which layer of hte OSI model does ingress filtering work on? = Layer 2 DATA, it ustilises the IP address filtering capability of a router that passes the inbound traffic from the outside of the network.

In terms of ingress filltering what do we mean by private IP addresses. = This type of block is designed to prevent malicious inbound traffic from a misconfigured interent based hsot or a spoofed address.

How does Ingress Filtering work? = This is the examination of inbound netwrok packets.

Which one of the following is NOT part of a DoS Defence Strategy? 
A)Disabling Necessary Service
B)Using Reverse Proxy
C)Enabling Router Throttling
D)Using Anti Malware
= A Disabling Neccessary Services , Whislt disabling uneccessary services will lower your attack surface.

In terms of C=PCI-DSS compliance why does egress filtering help? = Being able to to block IP address ranges,[Egress filtering can helpprevent the cardholder data environment being accessed by unauthroised systems]

If you want to allow all syslog traffic, what port would need opening ? = 514

If you wanted to deny unencrypted SMTP traffic which port would need to close? = Port 25

What does “deny all policy” mean in terms of egress filtering? = All forms of traffic are blocked outbound.[The firewall rule “deny all” means that all outbound traffic is not allowed to pass through the firewall

what is the charachteristic of a firewall that has been configured with a “default allow all” policy within egress filtering? = All outbound traffic is allowed [ The firewall rule “default allow all” means that all outbound traffic can pass thorugh the firewall

Why is it important to review firewall rules on a regular basis? = Tio ensure the firewall rules are still required,active and up to date [ it is important to review firewall rules on a regular basis to snure they are still required, active and up to date. Dormant firewall rules could leave a netwrok or system vulnerable to attack.


